{"version":3,"sources":["webpack:///webpack/bootstrap 9d1e7b7a36c7590ebf4c","webpack:///./src/main.js","webpack:///./src/reviews.js","webpack:///./src/review.js","webpack:///./src/load.js","webpack:///./src/form.js","webpack:///./~/browser-cookies/browser-cookies.js","webpack:///./src/game.js","webpack:///./src/gallery.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAc,iBAAiB;AAC/B;AACA;;AAEA,eAAc,sBAAsB;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;;AAEA,aAAY,WAAW;AACvB;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;;;;;;AC5CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;;;;;;;AC/DD;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzFA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACnBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA,wDAAuD,uBAAuB;AAC9E,wDAAuD,uBAAuB;AAC9E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9GA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC;AACnC,qCAAoC;AACpC,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB;AAChB,iBAAgB,wBAAwB;AACxC;;AAEA;AACA,yCAAwC;;AAExC;AACA,iBAAgB,oBAAoB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7DA;;AAEA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;;AAEA,eAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,cAAa,OAAO;AACpB,cAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,cAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,sBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,qBAAoB;AACpB;AACA;AACA;AACA;AACA,YAAW;;AAEX;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,oBAAmB,OAAO;AAC1B,qBAAoB;AACpB;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,oBAAmB,OAAO;AAC1B,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,cAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA,cAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACjwBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA","file":"js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9d1e7b7a36c7590ebf4c\n **/","'use strict';\n\nrequire('./reviews');\nvar form = require('./form');\nvar Game = require('./game');\nvar Gallery = require('./gallery');\nvar pics = document.querySelectorAll('.photogallery-image img');\nvar picsLinks = document.querySelectorAll('.photogallery-image');\nvar picsURL = [];\nvar picsLinksArr = [];\nvar gallery = new Gallery(picsURL);\n\nfor(var j = 0; j < pics.length; j++) {\n  picsURL.push(pics[j].src);\n}\n\nfor(var i = 0; i < picsLinks.length; i++) {\n  picsLinksArr.push(picsLinks[i]);\n}\n\npicsLinksArr.forEach(function(picslink, k) {\n  picsLinks[k].onclick = function() {\n    gallery.show(k);\n  };\n});\n\nvar game = new Game(document.querySelector('.demo'));\ngame.initializeLevelAndStart();\ngame.setGameStatus(Game.Verdict.INTRO);\n\nvar formOpenButton = document.querySelector('.reviews-controls-new');\n\n/** @param {MouseEvent} evt */\nformOpenButton.onclick = function(evt) {\n  evt.preventDefault();\n\n  form.open(function() {\n    game.setGameStatus(Game.Verdict.PAUSE);\n    game.setDeactivated(true);\n  });\n};\n\nform.onClose = function() {\n  game.setDeactivated(false);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main.js\n ** module id = 0\n ** module chunks = 0\n **/","'use strict';\n\nvar Review = require('./review');\nvar load = require('./load');\nvar reviewsContainer = document.querySelector('.reviews-list');\nvar reviewsFilter = document.querySelector('.reviews-filter');\nvar reviewsMore = document.querySelector('.reviews-controls-more');\nvar PAGE_SIZE = 3;\nvar pageNumber = 0;\nvar reviews = [];\nvar currentFilter = localStorage.getItem('filterID') || 'reviews-all';\ndocument.querySelector('#' + currentFilter).checked = true;\n\nvar reviewsVisibilityToggle = function() {\n  reviewsFilter.classList.toggle('invisible');\n};\n\nvar renderReviews = function(data) {\n  reviews = data;\n\n  reviews.forEach(function(item) {\n    var review = new Review(item);\n    reviewsContainer.appendChild(review.element);\n  });\n\n  if(!reviews.length) {\n    reviewsMore.classList.add('invisible');\n  } else {\n    reviewsMore.classList.remove('invisible');\n  }\n};\n\nvar changeFilter = function(filterID) {\n  reviewsContainer.innerHTML = '';\n  pageNumber = 0;\n  currentFilter = filterID;\n  localStorage.setItem('filterID', currentFilter);\n  addReviews();\n};\n\nvar addReviews = function() {\n  reviewsVisibilityToggle();\n\n  load('https://assets.htmlacademy.ru/api/reviews', {\n    from: pageNumber * PAGE_SIZE,\n    to: (pageNumber * PAGE_SIZE) + PAGE_SIZE,\n    filter: currentFilter\n  }, renderReviews);\n  pageNumber++;\n\n  reviewsVisibilityToggle();\n};\n\naddReviews();\n\nreviewsMore.addEventListener('click', function() {\n  addReviews();\n});\n\nreviewsFilter.addEventListener('change', function(evt) {\n  if(evt.target.tagName.toLowerCase() === 'input') {\n    changeFilter(evt.target.id);\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/reviews.js\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\n\nvar IMAGE_LOAD_TIMEOUT = 10000;\nvar templateElement = document.querySelector('#review-template');\nvar elementToClone;\n\nif ('content' in templateElement) {\n  elementToClone = templateElement.content.querySelector('.review');\n} else {\n  elementToClone = templateElement.querySelector('.review');\n}\n\nvar Review = function(data) {\n  this.data = data;\n  this.element = this.getReviewElement(data);\n  this.reviewQuizAnswerYes = this.element.querySelector('.review-quiz-answer-yes');\n  this.reviewQuizAnswerNo = this.element.querySelector('.review-quiz-answer-no');\n  this.onReviewQuizAnswerYes = this.onReviewQuizAnswerYes.bind(this);\n  this.onReviewQuizAnswerNo = this.onReviewQuizAnswerNo.bind(this);\n  this.reviewQuizAnswerYes.addEventListener('click', this.onReviewQuizAnswerYes);\n  this.reviewQuizAnswerNo.addEventListener('click', this.onReviewQuizAnswerNo);\n};\n\n\nReview.prototype = {\n  getReviewElement: function(review) {\n    var element = elementToClone.cloneNode(true);\n    element.querySelector('.review-text').textContent = review.description;\n    var starsBlock = element.querySelector('span.review-rating');\n\n    switch(review.rating) {\n      case 2:\n        starsBlock.style.width = '80px';\n        break;\n      case 3:\n        starsBlock.style.width = '120px';\n        break;\n      case 4:\n        starsBlock.style.width = '160px';\n        break;\n      case 5:\n        starsBlock.style.width = '200px';\n        break;\n      default:\n        starsBlock.style.width = '30px';\n    }\n\n    var img = new Image();\n    var imgLoadTimeout;\n    var imgContent = element.querySelector('img.review-author');\n\n    img.onload = function(evt) {\n      clearTimeout(imgLoadTimeout);\n      imgContent.src = evt.target.src;\n      imgContent.alt = 'Изображение пользователя';\n      imgContent.width = 124;\n      imgContent.height = 124;\n    };\n\n    img.onerror = function() {\n      element.classList.add('review-load-failure');\n    };\n\n    img.src = review.author.picture;\n    imgLoadTimeout = setTimeout(function() {\n      img.src = '';\n      element.classList.add('review-load-failure');\n    }, IMAGE_LOAD_TIMEOUT);\n\n    return element;\n  },\n  onReviewQuizAnswerYes: function() {\n    this.reviewQuizAnswerYes.classList.add('review-quiz-answer-active');\n    if(this.reviewQuizAnswerNo.classList.contains('review-quiz-answer-active')) {\n      this.reviewQuizAnswerNo.classList.remove('review-quiz-answer-active');\n    }\n  },\n  onReviewQuizAnswerNo: function() {\n    this.reviewQuizAnswerNo.classList.add('review-quiz-answer-active');\n    if(this.reviewQuizAnswerYes.classList.contains('review-quiz-answer-active')) {\n      this.reviewQuizAnswerYes.classList.remove('review-quiz-answer-active');\n    }\n  },\n  remove: function() {\n    this.reviewQuizAnswerYes.removeEventListener('click', this.onReviewQuizAnswerYes);\n    this.reviewQuizAnswerNo.removeEventListener('click', this.onReviewQuizAnswerNo);\n  }\n};\n\nmodule.exports = Review;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/review.js\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\nvar load = function(url, paramsObj, callback) {\n  var xhr = new XMLHttpRequest();\n\n  xhr.onload = function(evt) {\n    var loadedData = JSON.parse(evt.target.response);\n    callback(loadedData);\n  };\n\n  xhr.open(\n 'GET', url +\n '?from=' + paramsObj.from +\n '&to=' + paramsObj.to +\n '&filter=' + paramsObj.filter);\n\n  xhr.send();\n};\n\nmodule.exports = load;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/load.js\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\nvar browserCookies = require('browser-cookies');\nvar cookieMark = 'review-mark';\nvar cookieName = 'review-name';\n\nvar reviewForm = document.querySelector('.review-form');\nvar reviewMark = reviewForm.elements['review-mark'];\nvar reviewName = document.querySelector('#review-name');\nvar reviewLabelName = document.querySelector('.review-fields-name');\nvar reviewText = document.querySelector('#review-text');\nvar reviewLabelText = document.querySelector('.review-fields-text');\nvar submit = document.querySelector('.review-submit');\nvar reviewFieldsBlock = document.querySelector('.review-fields');\nvar formContainer = document.querySelector('.overlay-container');\nvar formCloseButton = document.querySelector('.review-form-close');\n\nreviewName.required = true;\nreviewLabelText.style.visibility = 'hidden';\nsubmit.disabled = true;\n\nreviewMark.value = browserCookies.get(cookieMark);\nreviewName.value = browserCookies.get(cookieName);\n\nfunction disableSubmit() {\n  if (reviewMark.value < 3) {\n    reviewText.required = true;\n    reviewLabelText.style.visibility = 'visible';\n  } else {\n    reviewText.required = false;\n    reviewLabelText.style.visibility = 'hidden';\n  }\n\n  if(reviewText.validity.valid) {\n    reviewLabelText.style.visibility = 'hidden';\n  } else {\n    reviewLabelText.style.visibility = 'visible';\n  }\n\n  if(reviewName.validity.valid) {\n    reviewLabelName.style.visibility = 'hidden';\n  } else {\n    reviewLabelName.style.visibility = 'visible';\n  }\n\n  if(reviewName.validity.valid && reviewText.validity.valid) {\n    reviewFieldsBlock.style.visibility = 'hidden';\n  } else {\n    reviewFieldsBlock.style.visibility = 'visible';\n  }\n\n  submit.disabled = !(reviewText.validity.valid && reviewName.validity.valid);\n}\n\nformCloseButton.onclick = function(evt) {\n  evt.preventDefault();\n  form.close();\n};\n\nreviewName.oninput = function() {\n  disableSubmit();\n};\n\nreviewText.oninput = function() {\n  disableSubmit();\n};\n\nfor (var i = 0; i < reviewMark.length; i++) {\n  reviewMark[i].onchange = function() {\n    disableSubmit();\n  };\n}\n\nreviewForm.onsubmit = function() {\n  browserCookies.set('review-mark', reviewMark.value, {expires: expireCount()});\n  browserCookies.set('review-name', reviewName.value, {expires: expireCount()});\n};\n\nvar expireCount = function() {\n  var now = new Date();\n  var expireDate = new Date(now.getFullYear() - 1, 11, 9);\n  var oneDay = 1000 * 60 * 60 * 24;\n\n  if (now.getMonth() === 11 && now.getDate() > 9) {\n    expireDate.setFullYear(expireDate.getFullYear() + 1);\n  }\n\n  return Math.ceil( (now.getTime() - expireDate.getTime()) / (oneDay) );\n};\n\nvar form = {\n  onClose: null,\n\n  /**\n   * @param {Function} cb\n   */\n  open: function(cb) {\n    formContainer.classList.remove('invisible');\n    cb();\n  },\n\n  close: function() {\n    formContainer.classList.add('invisible');\n\n    if (typeof this.onClose === 'function') {\n      this.onClose();\n    }\n  }\n};\n\nmodule.exports = form;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/form.js\n ** module id = 4\n ** module chunks = 0\n **/","exports.defaults = {};\n\nexports.set = function(name, value, options) {\n  // Retrieve options and defaults\n  var opts = options || {};\n  var defaults = exports.defaults;\n\n  // Apply default value for unspecified options\n  var expires  = opts.expires || defaults.expires;\n  var domain   = opts.domain  || defaults.domain;\n  var path     = opts.path     != undefined ? opts.path     : (defaults.path != undefined ? defaults.path : '/');\n  var secure   = opts.secure   != undefined ? opts.secure   : defaults.secure;\n  var httponly = opts.httponly != undefined ? opts.httponly : defaults.httponly;\n\n  // Determine cookie expiration date\n  // If succesful the result will be a valid Date, otherwise it will be an invalid Date or empty string\n  var expDate = expires == undefined ? '' :\n  // in case expires is an integer, it (should) specify the amount in days till the cookie expires\n  typeof expires == 'number' ? new Date(new Date().getTime() + (expires * 864e5)) :\n  // in case expires is (probably) a Date object\n  expires.getTime ? expires :\n  // in case expires is not in any of the above formats, try parsing as a format recognized by Date.parse()\n  new Date(expires);\n\n  // Set cookie\n  document.cookie = encodeURIComponent(name) + '=' +                          // Encode cookie name\n  value.replace(/[^#\\$&\\+/:<-\\[\\]-}]/g, encodeURIComponent) +                 // Encode cookie value (RFC6265)\n  (expDate && expDate.getTime() ? ';expires=' + expDate.toUTCString() : '') + // Add expiration date\n  (domain   ? ';domain=' + domain : '') +                                     // Add domain\n  (path     ? ';path='   + path   : '') +                                     // Add path\n  (secure   ? ';secure'           : '') +                                     // Add secure option\n  (httponly ? ';httponly'         : '');                                      // Add httponly option\n};\n\nexports.get = function(name) {\n  var cookies = document.cookie.split(';');\n\n  // Iterate all cookies\n  for(var i = 0; i < cookies.length; i++) {\n    var cookie = cookies[i];\n\n    // Determine separator index (\"name=value\")\n    var separatorIndex = cookie.indexOf('=');\n\n    // If a separator index is found, Decode the cookie name and compare to the requested cookie name\n    if (separatorIndex != -1 && decodeURIComponent(cookie.substring(0, separatorIndex).replace(/^\\s+|\\s+$/g,'')) == name) {\n      return decodeURIComponent(cookie.substring(separatorIndex + 1, cookie.length));\n    }\n  }\n\n  return null;\n};\n\nexports.erase = function(name, options) {\n  exports.set(name, '', {\n    expires:  -1,\n    domain:   options && options.domain,\n    path:     options && options.path,\n    secure:   false,\n    httponly: false}\n  );\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/browser-cookies/browser-cookies.js\n ** module id = 5\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * @const\n * @type {number}\n */\nvar HEIGHT = 300;\n\n/**\n * @const\n * @type {number}\n */\nvar WIDTH = 700;\n\n/**\n * ID уровней.\n * @enum {number}\n */\nvar Level = {\n  INTRO: 0,\n  MOVE_LEFT: 1,\n  MOVE_RIGHT: 2,\n  LEVITATE: 3,\n  HIT_THE_MARK: 4\n};\n\n/**\n * Порядок прохождения уровней.\n * @type {Array.<Level>}\n */\nvar LevelSequence = [\n  Level.INTRO\n];\n\n/**\n * Начальный уровень.\n * @type {Level}\n */\nvar INITIAL_LEVEL = LevelSequence[0];\n\n/**\n * Допустимые виды объектов на карте.\n * @enum {number}\n */\nvar ObjectType = {\n  ME: 0,\n  FIREBALL: 1\n};\n\n/**\n * Допустимые состояния объектов.\n * @enum {number}\n */\nvar ObjectState = {\n  OK: 0,\n  DISPOSED: 1\n};\n\n/**\n * Коды направлений.\n * @enum {number}\n */\nvar Direction = {\n  NULL: 0,\n  LEFT: 1,\n  RIGHT: 2,\n  UP: 4,\n  DOWN: 8\n};\n\n/**\n * Правила перерисовки объектов в зависимости от состояния игры.\n * @type {Object.<ObjectType, function(Object, Object, number): Object>}\n */\nvar ObjectsBehaviour = {};\n\n/**\n * Обновление движения мага. Движение мага зависит от нажатых в данный момент\n * стрелок. Маг может двигаться одновременно по горизонтали и по вертикали.\n * На движение мага влияет его пересечение с препятствиями.\n * @param {Object} object\n * @param {Object} state\n * @param {number} timeframe\n */\nObjectsBehaviour[ObjectType.ME] = function(object, state, timeframe) {\n  // Пока зажата стрелка вверх, маг сначала поднимается, а потом левитирует\n  // в воздухе на определенной высоте.\n  // NB! Сложность заключается в том, что поведение описано в координатах\n  // канваса, а не координатах, относительно нижней границы игры.\n  if (state.keysPressed.UP && object.y > 0) {\n    object.direction = object.direction & ~Direction.DOWN;\n    object.direction = object.direction | Direction.UP;\n    object.y -= object.speed * timeframe * 2;\n\n    if (object.y < 0) {\n      object.y = 0;\n    }\n  }\n\n  // Если стрелка вверх не зажата, а маг находится в воздухе, он плавно\n  // опускается на землю.\n  if (!state.keysPressed.UP) {\n    if (object.y < HEIGHT - object.height) {\n      object.direction = object.direction & ~Direction.UP;\n      object.direction = object.direction | Direction.DOWN;\n      object.y += object.speed * timeframe / 3;\n    } else {\n      object.Direction = object.direction & ~Direction.DOWN;\n    }\n  }\n\n  // Если зажата стрелка влево, маг перемещается влево.\n  if (state.keysPressed.LEFT) {\n    object.direction = object.direction & ~Direction.RIGHT;\n    object.direction = object.direction | Direction.LEFT;\n    object.x -= object.speed * timeframe;\n  }\n\n  // Если зажата стрелка вправо, маг перемещается вправо.\n  if (state.keysPressed.RIGHT) {\n    object.direction = object.direction & ~Direction.LEFT;\n    object.direction = object.direction | Direction.RIGHT;\n    object.x += object.speed * timeframe;\n  }\n\n  // Ограничения по перемещению по полю. Маг не может выйти за пределы поля.\n  if (object.y < 0) {\n    object.y = 0;\n    object.Direction = object.direction & ~Direction.DOWN;\n    object.Direction = object.direction & ~Direction.UP;\n  }\n\n  if (object.y > HEIGHT - object.height) {\n    object.y = HEIGHT - object.height;\n    object.Direction = object.direction & ~Direction.DOWN;\n    object.Direction = object.direction & ~Direction.UP;\n  }\n\n  if (object.x < 0) {\n    object.x = 0;\n  }\n\n  if (object.x > WIDTH - object.width) {\n    object.x = WIDTH - object.width;\n  }\n};\n\n/**\n * Обновление движения файрбола. Файрбол выпускается в определенном направлении\n * и после этого неуправляемо движется по прямой в заданном направлении. Если\n * он пролетает весь экран насквозь, он исчезает.\n * @param {Object} object\n * @param {Object} state\n * @param {number} timeframe\n */\nObjectsBehaviour[ObjectType.FIREBALL] = function(object, state, timeframe) {\n  if (object.direction & Direction.LEFT) {\n    object.x -= object.speed * timeframe;\n  }\n\n  if (object.direction & Direction.RIGHT) {\n    object.x += object.speed * timeframe;\n  }\n\n  if (object.x < 0 || object.x > WIDTH) {\n    object.state = ObjectState.DISPOSED;\n  }\n};\n\n/**\n * ID возможных ответов функций, проверяющих успех прохождения уровня.\n * CONTINUE говорит о том, что раунд не закончен и игру нужно продолжать,\n * WIN о том, что раунд выигран, FAIL — о поражении. PAUSE о том, что игру\n * нужно прервать.\n * @enum {number}\n */\nvar Verdict = {\n  CONTINUE: 0,\n  WIN: 1,\n  FAIL: 2,\n  PAUSE: 3,\n  INTRO: 4\n};\n\n/**\n * Правила завершения уровня. Ключами служат ID уровней, значениями функции\n * принимающие на вход состояние уровня и возвращающие true, если раунд\n * можно завершать или false если нет.\n * @type {Object.<Level, function(Object):boolean>}\n */\nvar LevelsRules = {};\n\n/**\n * Уровень считается пройденным, если был выпущен файлболл и он улетел\n * за экран.\n * @param {Object} state\n * @return {Verdict}\n */\nLevelsRules[Level.INTRO] = function(state) {\n  var fireballs = state.garbage.filter(function(object) {\n    return object.type === ObjectType.FIREBALL;\n  });\n\n  return fireballs.length ? Verdict.WIN : Verdict.CONTINUE;\n};\n\n/**\n * Начальные условия для уровней.\n * @enum {Object.<Level, function>}\n */\nvar LevelsInitialize = {};\n\n/**\n * Первый уровень.\n * @param {Object} state\n * @return {Object}\n */\nLevelsInitialize[Level.INTRO] = function(state) {\n  state.objects.push(\n    // Установка персонажа в начальное положение. Он стоит в крайнем левом\n    // углу экрана, глядя вправо. Скорость перемещения персонажа на этом\n    // уровне равна 2px за кадр.\n    {\n      direction: Direction.RIGHT,\n      height: 84,\n      speed: 2,\n      sprite: 'img/wizard.gif',\n      spriteReversed: 'img/wizard-reversed.gif',\n      state: ObjectState.OK,\n      type: ObjectType.ME,\n      width: 61,\n      x: WIDTH / 3,\n      y: HEIGHT - 100\n    }\n  );\n\n  return state;\n};\n\n/**\n  Переменные для эффекта параллакса\n*/\nvar THROTTLE_TIMEOUT = 100;\nvar INITIAL_CLOUDS_POSITION = '0px';\nvar scrollTimeout;\nvar clouds = document.querySelector('.header-clouds');\nclouds.style.backgroundPosition = INITIAL_CLOUDS_POSITION;\nvar demo = document.querySelector('.demo');\n\n/**\n * Конструктор объекта Game. Создает canvas, добавляет обработчики событий\n * и показывает приветственный экран.\n * @param {Element} container\n * @constructor\n */\nvar Game = function(container) {\n  this.container = container;\n  this.canvas = document.createElement('canvas');\n  this.canvas.width = container.clientWidth;\n  this.canvas.height = container.clientHeight;\n  this.container.appendChild(this.canvas);\n\n  this.ctx = this.canvas.getContext('2d');\n\n  this._onKeyDown = this._onKeyDown.bind(this);\n  this._onKeyUp = this._onKeyUp.bind(this);\n  this._pauseListener = this._pauseListener.bind(this);\n  this._onScroll = this._onScroll.bind(this);\n  this.setDeactivated(false);\n};\n\nGame.prototype = {\n  /**\n   * Текущий уровень игры.\n   * @type {Level}\n   */\n  level: INITIAL_LEVEL,\n\n  /** @param {boolean} deactivated */\n  setDeactivated: function(deactivated) {\n    if (this._deactivated === deactivated) {\n      return;\n    }\n\n    this._deactivated = deactivated;\n\n    if (deactivated) {\n      this._removeGameListeners();\n    } else {\n      this._initializeGameListeners();\n    }\n  },\n\n  /**\n   * Состояние игры. Описывает местоположение всех объектов на игровой карте\n   * и время проведенное на уровне и в игре.\n   * @return {Object}\n   */\n  getInitialState: function() {\n    return {\n      // Статус игры. Если CONTINUE, то игра продолжается.\n      currentStatus: Verdict.CONTINUE,\n\n      // Объекты, удаленные на последнем кадре.\n      garbage: [],\n\n      // Время с момента отрисовки предыдущего кадра.\n      lastUpdated: null,\n\n      // Состояние нажатых клавиш.\n      keysPressed: {\n        ESC: false,\n        LEFT: false,\n        RIGHT: false,\n        SPACE: false,\n        UP: false\n      },\n\n      // Время начала прохождения уровня.\n      levelStartTime: null,\n\n      // Все объекты на карте.\n      objects: [],\n\n      // Время начала прохождения игры.\n      startTime: null\n    };\n  },\n\n  /**\n   * Начальные проверки и запуск текущего уровня.\n   * @param {Level=} level\n   * @param {boolean=} restart\n   */\n  initializeLevelAndStart: function(level, restart) {\n    level = typeof level === 'undefined' ? this.level : level;\n    restart = typeof restart === 'undefined' ? true : restart;\n\n    if (restart || !this.state) {\n      // При перезапуске уровня, происходит полная перезапись состояния\n      // игры из изначального состояния.\n      this.state = this.getInitialState();\n      this.state = LevelsInitialize[this.level](this.state);\n    } else {\n      // При продолжении уровня состояние сохраняется, кроме записи о том,\n      // что состояние уровня изменилось с паузы на продолжение игры.\n      this.state.currentStatus = Verdict.CONTINUE;\n    }\n\n    // Запись времени начала игры и времени начала уровня.\n    this.state.levelStartTime = Date.now();\n    if (!this.state.startTime) {\n      this.state.startTime = this.state.levelStartTime;\n    }\n\n    this._preloadImagesForLevel(function() {\n      // Предварительная отрисовка игрового экрана.\n      this.render();\n\n      // Установка обработчиков событий.\n      this._initializeGameListeners();\n\n      // Запуск игрового цикла.\n      this.update();\n    }.bind(this));\n  },\n\n  /**\n   * Временная остановка игры.\n   * @param {Verdict=} verdict\n   */\n  pauseLevel: function(verdict) {\n    if (verdict) {\n      this.state.currentStatus = verdict;\n    }\n\n    this.state.keysPressed.ESC = false;\n    this.state.lastUpdated = null;\n\n    this._removeGameListeners();\n    window.addEventListener('keydown', this._pauseListener);\n\n    this._drawPauseScreen();\n  },\n\n  /**\n   * Обработчик событий клавиатуры во время паузы.\n   * @param {KeyboardsEvent} evt\n   * @private\n   * @private\n   */\n  _pauseListener: function(evt) {\n    if (evt.keyCode === 32 && !this._deactivated) {\n      evt.preventDefault();\n      var needToRestartTheGame = this.state.currentStatus === Verdict.WIN ||\n          this.state.currentStatus === Verdict.FAIL;\n      this.initializeLevelAndStart(this.level, needToRestartTheGame);\n\n      window.removeEventListener('keydown', this._pauseListener);\n    }\n  },\n\n  /**\n   * Отрисовка экрана паузы.\n   */\n\n  _drawPauseScreen: function() {\n\n    function textWrap(ctx, text, x, y, maxWidth, lineHeight) {\n      var words = text.split(' ');\n      var line = '';\n      for (var i = 0; i < words.length; i++) {\n        var testLine = line + words[i] + ' ';\n        var testWidth = ctx.measureText(testLine).width;\n        if (testWidth > maxWidth) {\n          ctx.fillText(line, x, y);\n          line = words[i] + ' ';\n          y += lineHeight;\n        } else {\n          line = testLine;\n        }\n      }\n      ctx.fillText(line, x, y);\n    }\n\n    var ctx = this.ctx;\n    var textStartX = 340;\n    var textStartY = 70;\n    var lineHeight = 20;\n    var maxWidth = 250;\n    var text = ['Привет! Я перемещаюсь при нажатии на стрелки и пускаю фаербол клавишей шифт. Жми пробел, чтобы начать!', 'Ты выиграл! Сыграем еще?', 'Ты проиграл! Попробуй сначала', 'Пауза. Пробел для продолжения'];\n\n    ctx.beginPath();\n    ctx.moveTo(310, 210);\n    ctx.lineTo(330, 60);\n    ctx.lineTo(630, 60);\n    ctx.lineTo(630, 200);\n    ctx.closePath();\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    ctx.fill();\n\n    ctx.beginPath();\n    ctx.moveTo(300, 200);\n    ctx.lineTo(320, 50);\n    ctx.lineTo(620, 50);\n    ctx.lineTo(620, 190);\n    ctx.closePath();\n    ctx.fillStyle = '#ffffff';\n    ctx.fill();\n\n    ctx.font = '16px PT Mono';\n    ctx.textBaseline = 'hanging';\n    ctx.fillStyle = '#000000';\n\n    switch (this.state.currentStatus) {\n      case Verdict.WIN:\n        textWrap(ctx, text[1], textStartX, textStartY, maxWidth, lineHeight);\n        break;\n      case Verdict.FAIL:\n        textWrap(ctx, text[2], textStartX, textStartY, maxWidth, lineHeight);\n        break;\n      case Verdict.PAUSE:\n        textWrap(ctx, text[3], textStartX, textStartY, maxWidth, lineHeight);\n        break;\n      case Verdict.INTRO:\n        textWrap(ctx, text[0], textStartX, textStartY, maxWidth, lineHeight);\n        break;\n    }\n  },\n\n  /**\n   * Предзагрузка необходимых изображений для уровня.\n   * @param {function} callback\n   * @private\n   */\n  _preloadImagesForLevel: function(callback) {\n    if (typeof this._imagesArePreloaded === 'undefined') {\n      this._imagesArePreloaded = [];\n    }\n\n    if (this._imagesArePreloaded[this.level]) {\n      callback();\n      return;\n    }\n\n    var levelImages = [];\n    this.state.objects.forEach(function(object) {\n      levelImages.push(object.sprite);\n\n      if (object.spriteReversed) {\n        levelImages.push(object.spriteReversed);\n      }\n    });\n\n    var i = levelImages.length;\n    var imagesToGo = levelImages.length;\n\n    while (i-- > 0) {\n      var image = new Image();\n      image.src = levelImages[i];\n      image.onload = function() {\n        if (--imagesToGo === 0) {\n          this._imagesArePreloaded[this.level] = true;\n          callback();\n        }\n      }.bind(this);\n    }\n  },\n\n  /**\n   * Обновление статуса объектов на экране. Добавляет объекты, которые должны\n   * появиться, выполняет проверку поведения всех объектов и удаляет те, которые\n   * должны исчезнуть.\n   * @param {number} delta Время, прошеднее с отрисовки прошлого кадра.\n   */\n  updateObjects: function(delta) {\n    // Персонаж.\n    var me = this.state.objects.filter(function(object) {\n      return object.type === ObjectType.ME;\n    })[0];\n\n    // Добавляет на карту файрбол по нажатию на Shift.\n    if (this.state.keysPressed.SHIFT) {\n      this.state.objects.push({\n        direction: me.direction,\n        height: 24,\n        speed: 5,\n        sprite: 'img/fireball.gif',\n        type: ObjectType.FIREBALL,\n        width: 24,\n        x: me.direction & Direction.RIGHT ? me.x + me.width : me.x - 24,\n        y: me.y + me.height / 2\n      });\n\n      this.state.keysPressed.SHIFT = false;\n    }\n\n    this.state.garbage = [];\n\n    // Убирает в garbage не используемые на карте объекты.\n    var remainingObjects = this.state.objects.filter(function(object) {\n      ObjectsBehaviour[object.type](object, this.state, delta);\n\n      if (object.state === ObjectState.DISPOSED) {\n        this.state.garbage.push(object);\n        return false;\n      }\n\n      return true;\n    }, this);\n\n    this.state.objects = remainingObjects;\n  },\n\n  /**\n   * Проверка статуса текущего уровня.\n   */\n  checkStatus: function() {\n    // Нет нужны запускать проверку, нужно ли останавливать уровень, если\n    // заранее известно, что да.\n    if (this.state.currentStatus !== Verdict.CONTINUE) {\n      return;\n    }\n\n    if (!this.commonRules) {\n      /**\n       * Проверки, не зависящие от уровня, но влияющие на его состояние.\n       * @type {Array.<functions(Object):Verdict>}\n       */\n      this.commonRules = [\n        /**\n         * Если персонаж мертв, игра прекращается.\n         * @param {Object} state\n         * @return {Verdict}\n         */\n        function checkDeath(state) {\n          var me = state.objects.filter(function(object) {\n            return object.type === ObjectType.ME;\n          })[0];\n\n          return me.state === ObjectState.DISPOSED ?\n              Verdict.FAIL :\n              Verdict.CONTINUE;\n        },\n\n        /**\n         * Если нажата клавиша Esc игра ставится на паузу.\n         * @param {Object} state\n         * @return {Verdict}\n         */\n        function checkKeys(state) {\n          return state.keysPressed.ESC ? Verdict.PAUSE : Verdict.CONTINUE;\n        },\n\n        /**\n         * Игра прекращается если игрок продолжает играть в нее два часа подряд.\n         * @param {Object} state\n         * @return {Verdict}\n         */\n        function checkTime(state) {\n          return Date.now() - state.startTime > 3 * 60 * 1000 ?\n              Verdict.FAIL :\n              Verdict.CONTINUE;\n        }\n      ];\n    }\n\n    // Проверка всех правил влияющих на уровень. Запускаем цикл проверок\n    // по всем универсальным проверкам и проверкам конкретного уровня.\n    // Цикл продолжается до тех пор, пока какая-либо из проверок не вернет\n    // любое другое состояние кроме CONTINUE или пока не пройдут все\n    // проверки. После этого состояние сохраняется.\n    var allChecks = this.commonRules.concat(LevelsRules[this.level]);\n    var currentCheck = Verdict.CONTINUE;\n    var currentRule;\n\n    while (currentCheck === Verdict.CONTINUE && allChecks.length) {\n      currentRule = allChecks.shift();\n      currentCheck = currentRule(this.state);\n    }\n\n    this.state.currentStatus = currentCheck;\n  },\n\n  /**\n   * Принудительная установка состояния игры. Используется для изменения\n   * состояния игры от внешних условий, например, когда необходимо остановить\n   * игру, если она находится вне области видимости и установить вводный\n   * экран.\n   * @param {Verdict} status\n   */\n  setGameStatus: function(status) {\n    if (this.state.currentStatus !== status) {\n      this.state.currentStatus = status;\n    }\n  },\n\n  /**\n   * Отрисовка всех объектов на экране.\n   */\n  render: function() {\n    // Удаление всех отрисованных на странице элементов.\n    this.ctx.clearRect(0, 0, WIDTH, HEIGHT);\n\n    // Выставление всех элементов, оставшихся в this.state.objects согласно\n    // их координатам и направлению.\n    this.state.objects.forEach(function(object) {\n      if (object.sprite) {\n        var image = new Image(object.width, object.height);\n        image.src = (object.spriteReversed && object.direction & Direction.LEFT) ?\n            object.spriteReversed :\n            object.sprite;\n        this.ctx.drawImage(image, object.x, object.y, object.width, object.height);\n      }\n    }, this);\n  },\n\n  /**\n   * Основной игровой цикл. Сначала проверяет состояние всех объектов игры\n   * и обновляет их согласно правилам их поведения, а затем запускает\n   * проверку текущего раунда. Рекурсивно продолжается до тех пор, пока\n   * проверка не вернет состояние FAIL, WIN или PAUSE.\n   */\n  update: function() {\n    if (!this.state.lastUpdated) {\n      this.state.lastUpdated = Date.now();\n    }\n\n    var delta = (Date.now() - this.state.lastUpdated) / 10;\n    this.updateObjects(delta);\n    this.checkStatus();\n\n    switch (this.state.currentStatus) {\n      case Verdict.CONTINUE:\n        this.state.lastUpdated = Date.now();\n        this.render();\n        requestAnimationFrame(function() {\n          this.update();\n        }.bind(this));\n        break;\n\n      case Verdict.WIN:\n      case Verdict.FAIL:\n      case Verdict.PAUSE:\n      case Verdict.INTRO:\n        this.pauseLevel();\n        break;\n    }\n  },\n\n  /**\n   * @param {KeyboardEvent} evt [description]\n   * @private\n   */\n  _onKeyDown: function(evt) {\n    switch (evt.keyCode) {\n      case 37:\n        this.state.keysPressed.LEFT = true;\n        break;\n      case 39:\n        this.state.keysPressed.RIGHT = true;\n        break;\n      case 38:\n        this.state.keysPressed.UP = true;\n        break;\n      case 27:\n        this.state.keysPressed.ESC = true;\n        break;\n    }\n\n    if (evt.shiftKey) {\n      this.state.keysPressed.SHIFT = true;\n    }\n  },\n\n  /**\n   * @param {KeyboardEvent} evt [description]\n   * @private\n   */\n  _onKeyUp: function(evt) {\n    switch (evt.keyCode) {\n      case 37:\n        this.state.keysPressed.LEFT = false;\n        break;\n      case 39:\n        this.state.keysPressed.RIGHT = false;\n        break;\n      case 38:\n        this.state.keysPressed.UP = false;\n        break;\n      case 27:\n        this.state.keysPressed.ESC = false;\n        break;\n    }\n\n    if (evt.shiftKey) {\n      this.state.keysPressed.SHIFT = false;\n    }\n  },\n\n  _onScroll: function() {\n    var self = this;\n    clearTimeout(scrollTimeout);\n    scrollTimeout = setTimeout(function() {\n      if(demo.getBoundingClientRect().bottom < 0) {\n        self.setGameStatus(Game.Verdict.PAUSE);\n      }\n    }, THROTTLE_TIMEOUT);\n\n    var scrolled = window.pageYOffset;\n    clouds.style.backgroundPosition = -(scrolled / 4) + 'px';\n  },\n\n  /** @private */\n  _initializeGameListeners: function() {\n    window.addEventListener('keydown', this._onKeyDown);\n    window.addEventListener('keyup', this._onKeyUp);\n    window.addEventListener('scroll', this._onScroll);\n  },\n\n  /** @private */\n  _removeGameListeners: function() {\n    window.removeEventListener('keydown', this._onKeyDown);\n    window.removeEventListener('keyup', this._onKeyUp);\n  }\n};\n\nGame.Verdict = Verdict;\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/game.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\n\nvar activePicture = 0;\n\nvar Gallery = function(pictures) {\n  this.pictures = pictures;\n  this.galleryContainer = document.querySelector('.overlay-gallery');\n  this.galleryImgContainer = document.querySelector('.overlay-gallery-preview');\n  this.galleryPrevious = document.querySelector('.overlay-gallery-control-left');\n  this.galleryNext = document.querySelector('.overlay-gallery-control-right');\n  this.galleryCurrent = document.querySelector('.preview-number-current');\n  this.galleryTotal = document.querySelector('.preview-number-total');\n  this.galleryClose = document.querySelector('.overlay-gallery-close');\n  this.activePicture = activePicture;\n  this.onGalleryClose = this.onGalleryClose.bind(this);\n  this.onGalleryNext = this.onGalleryNext.bind(this);\n  this.onGalleryPrevious = this.onGalleryPrevious.bind(this);\n};\n\nGallery.prototype.onGalleryClose = function() {\n  this.hide();\n};\n\nGallery.prototype.onGalleryNext = function() {\n  var limitMax = this.pictures.length - 1;\n  if(this.activePicture >= limitMax) {\n    this.activePicture = limitMax;\n  } else {\n    this.setActivePicture(this.activePicture + 1);\n  }\n};\n\nGallery.prototype.onGalleryPrevious = function() {\n  var limitMin = 0;\n  if(this.activePicture <= limitMin) {\n    this.activePicture = limitMin;\n  } else {\n    this.setActivePicture(this.activePicture - 1);\n  }\n};\n\nGallery.prototype.show = function(num) {\n  this.galleryContainer.classList.remove('invisible');\n  this.setActivePicture(num);\n  this.galleryClose.addEventListener('click', this.onGalleryClose);\n  this.galleryNext.addEventListener('click', this.onGalleryNext);\n  this.galleryPrevious.addEventListener('click', this.onGalleryPrevious);\n};\n\nGallery.prototype.hide = function() {\n  this.galleryContainer.classList.add('invisible');\n  this.galleryClose.removeEventListener('click', this.onGalleryClose);\n  this.galleryNext.removeEventListener('click', this.onGalleryNext);\n  this.galleryPrevious.removeEventListener('click', this.onGalleryPrevious);\n};\n\nGallery.prototype.setActivePicture = function(num) {\n  this.activePicture = num;\n\n  var img = new Image();\n  img.src = this.pictures[this.activePicture];\n\n  if(this.img) {\n    this.galleryImgContainer.removeChild(this.img);\n    this.galleryImgContainer.appendChild(img);\n  } else {\n    this.galleryImgContainer.appendChild(img);\n  }\n\n  this.img = img;\n\n\n  this.galleryCurrent.textContent = this.activePicture + 1;\n  this.galleryTotal.textContent = this.pictures.length;\n};\n\nmodule.exports = Gallery;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/gallery.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}